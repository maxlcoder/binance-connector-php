<?php

/**
 * FlexibleLockedApiTest
 * PHP version 8.1.
 *
 * @category Class
 *
 * @author   OpenAPI Generator team
 *
 * @see     https://openapi-generator.tech
 */

/**
 * Binance Simple Earn REST API.
 *
 * OpenAPI Specification for the Binance Simple Earn REST API
 *
 * The version of the OpenAPI document: 1.0.0
 * Generated by: https://openapi-generator.tech
 * Generator version: 7.12.0
 */

/**
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Please update the test case below to test the endpoint.
 */

namespace Binance\Client\SimpleEarn\Test\Api;

use Binance\Client\SimpleEarn\Api\FlexibleLockedApi;
use Binance\Client\SimpleEarn\Model\RedeemFlexibleProductRequest;
use Binance\Client\SimpleEarn\Model\RedeemLockedProductRequest;
use Binance\Client\SimpleEarn\Model\SetFlexibleAutoSubscribeRequest;
use Binance\Client\SimpleEarn\Model\SetLockedAutoSubscribeRequest;
use Binance\Client\SimpleEarn\Model\SetLockedProductRedeemOptionRequest;
use Binance\Client\SimpleEarn\Model\SubscribeFlexibleProductRequest;
use Binance\Client\SimpleEarn\Model\SubscribeLockedProductRequest;
use Binance\Common\Configuration\ClientConfiguration;
use Binance\Common\Configuration\SignatureConfiguration;
use Binance\Common\HttpClient;
use GuzzleHttp\Psr7\Utils;
use PHPUnit\Framework\TestCase;
use Psr\Http\Message\ResponseInterface;

/**
 * FlexibleLockedApiTest Class Doc Comment.
 *
 * @category Class
 *
 * @author   OpenAPI Generator team
 *
 * @see     https://openapi-generator.tech
 *
 * @internal
 *
 * @coversNothing
 */
class FlexibleLockedApiTest extends TestCase
{
    public function getApiMock(&$request)
    {
        $clientMock = $this->createMock(HttpClient::class);
        $signatureConfig = new SignatureConfiguration();
        $signatureConfig->setApiKey('apiKey');
        $signatureConfig->setSecretKey('secretKey');
        $clientConfig = new ClientConfiguration();
        $clientConfig->setUrl('http://localhost:8080');
        $clientConfig->setSignatureConfiguration($signatureConfig);
        $responseMock = $this->createMock(ResponseInterface::class);

        $responseMock->expects($this->any())
            ->method('getStatusCode')
            ->willReturn(200)
        ;

        $responseMock->expects($this->any())
            ->method('getBody')
            ->willReturn(Utils::streamFor('{}'))
        ;

        $clientMock->expects($this->once())
            ->method('send')
            ->will($this->returnCallback(function ($actualRequest) use (&$request, $responseMock) {
                $request = $actualRequest;

                return $responseMock;
            }))
        ;

        $apiMock = $this->getMockBuilder(FlexibleLockedApi::class)
            ->setConstructorArgs([$clientConfig, $clientMock])
            ->onlyMethods(['getTimestamp'])
            ->getMock()
        ;

        $apiMock->method('getTimestamp')->willReturn('1736393892000');

        return $apiMock;
    }

    /**
     * Test case for getCollateralRecord.
     *
     * Get Collateral Record(USER_DATA).
     */
    public function testGetCollateralRecord()
    {
        $productId = '1';
        $startTime = 1623319461670;
        $endTime = 1641782889000;
        $current = 1;
        $size = 10;
        $recvWindow = 5000;
        $response = $this->getApiMock($request)->getCollateralRecord($productId, $startTime, $endTime, $current, $size, $recvWindow);

        parse_str($request->getUri(), $queryMap);

        self::assertEquals(200, $response->getStatusCode());
        self::assertEquals('/sapi/v1/simple-earn/flexible/history/collateralRecord', $request->getUri()->getPath());
        self::assertEquals('906323d23878072da9680bca3160b76d28b6ea07530e027f762757a381c263c0', $queryMap['signature']);
    }

    /**
     * Test case for getFlexiblePersonalLeftQuota.
     *
     * Get Flexible Personal Left Quota(USER_DATA).
     */
    public function testGetFlexiblePersonalLeftQuota()
    {
        $productId = '1';
        $recvWindow = 5000;
        $response = $this->getApiMock($request)->getFlexiblePersonalLeftQuota($productId, $recvWindow);

        parse_str($request->getUri(), $queryMap);

        self::assertEquals(200, $response->getStatusCode());
        self::assertEquals('/sapi/v1/simple-earn/flexible/personalLeftQuota', $request->getUri()->getPath());
        self::assertEquals('3449171bcce7a8aa43ee9684da7eebf17feeecb24ed8fd2858ca78fcc5d87e85', $queryMap['signature']);
    }

    /**
     * Test case for getFlexibleProductPosition.
     *
     * Get Flexible Product Position(USER_DATA).
     */
    public function testGetFlexibleProductPosition()
    {
        $asset = '';
        $productId = '1';
        $current = 1;
        $size = 10;
        $recvWindow = 5000;
        $response = $this->getApiMock($request)->getFlexibleProductPosition($asset, $productId, $current, $size, $recvWindow);

        parse_str($request->getUri(), $queryMap);

        self::assertEquals(200, $response->getStatusCode());
        self::assertEquals('/sapi/v1/simple-earn/flexible/position', $request->getUri()->getPath());
        self::assertEquals('5d1a560b8fbc0cbd5441dd825bb0b128cc309f7300772dc63d502602e1b487db', $queryMap['signature']);
    }

    /**
     * Test case for getFlexibleRedemptionRecord.
     *
     * Get Flexible Redemption Record(USER_DATA).
     */
    public function testGetFlexibleRedemptionRecord()
    {
        $productId = '1';
        $redeemId = '1';
        $asset = '';
        $startTime = 1623319461670;
        $endTime = 1641782889000;
        $current = 1;
        $size = 10;
        $recvWindow = 5000;
        $response = $this->getApiMock($request)->getFlexibleRedemptionRecord($productId, $redeemId, $asset, $startTime, $endTime, $current, $size, $recvWindow);

        parse_str($request->getUri(), $queryMap);

        self::assertEquals(200, $response->getStatusCode());
        self::assertEquals('/sapi/v1/simple-earn/flexible/history/redemptionRecord', $request->getUri()->getPath());
        self::assertEquals('24f9e1f6ae31ef8d5702a1b834c5dc2f15b6d78cf485ea1abdc6b07752f86d63', $queryMap['signature']);
    }

    /**
     * Test case for getFlexibleRewardsHistory.
     *
     * Get Flexible Rewards History(USER_DATA).
     */
    public function testGetFlexibleRewardsHistory()
    {
        $type = 's';
        $productId = '1';
        $asset = '';
        $startTime = 1623319461670;
        $endTime = 1641782889000;
        $current = 1;
        $size = 10;
        $recvWindow = 5000;
        $response = $this->getApiMock($request)->getFlexibleRewardsHistory($type, $productId, $asset, $startTime, $endTime, $current, $size, $recvWindow);

        parse_str($request->getUri(), $queryMap);

        self::assertEquals(200, $response->getStatusCode());
        self::assertEquals('/sapi/v1/simple-earn/flexible/history/rewardsRecord', $request->getUri()->getPath());
        self::assertEquals('b74b860a05349f57d0c41be83ff8af3f9442866cb9c5753cff50243f61b6f92c', $queryMap['signature']);
    }

    /**
     * Test case for getFlexibleSubscriptionPreview.
     *
     * Get Flexible Subscription Preview(USER_DATA).
     */
    public function testGetFlexibleSubscriptionPreview()
    {
        $productId = '1';
        $amount = 1.0;
        $recvWindow = 5000;
        $response = $this->getApiMock($request)->getFlexibleSubscriptionPreview($productId, $amount, $recvWindow);

        parse_str($request->getUri(), $queryMap);

        self::assertEquals(200, $response->getStatusCode());
        self::assertEquals('/sapi/v1/simple-earn/flexible/subscriptionPreview', $request->getUri()->getPath());
        self::assertEquals('00a7c80c0c410b10c6a3067e01f82fc810a365b87c83c5086e7224f826896ff5', $queryMap['signature']);
    }

    /**
     * Test case for getFlexibleSubscriptionRecord.
     *
     * Get Flexible Subscription Record(USER_DATA).
     */
    public function testGetFlexibleSubscriptionRecord()
    {
        $productId = '1';
        $purchaseId = '1';
        $asset = '';
        $startTime = 1623319461670;
        $endTime = 1641782889000;
        $current = 1;
        $size = 10;
        $recvWindow = 5000;
        $response = $this->getApiMock($request)->getFlexibleSubscriptionRecord($productId, $purchaseId, $asset, $startTime, $endTime, $current, $size, $recvWindow);

        parse_str($request->getUri(), $queryMap);

        self::assertEquals(200, $response->getStatusCode());
        self::assertEquals('/sapi/v1/simple-earn/flexible/history/subscriptionRecord', $request->getUri()->getPath());
        self::assertEquals('2f4dea9910f0345492aa9beeb12c72486d173bbcf06e526558fe507742aff2b7', $queryMap['signature']);
    }

    /**
     * Test case for getLockedPersonalLeftQuota.
     *
     * Get Locked Personal Left Quota(USER_DATA).
     */
    public function testGetLockedPersonalLeftQuota()
    {
        $projectId = '1';
        $recvWindow = 5000;
        $response = $this->getApiMock($request)->getLockedPersonalLeftQuota($projectId, $recvWindow);

        parse_str($request->getUri(), $queryMap);

        self::assertEquals(200, $response->getStatusCode());
        self::assertEquals('/sapi/v1/simple-earn/locked/personalLeftQuota', $request->getUri()->getPath());
        self::assertEquals('7df8536b8711da59322819086e27ee0e183d18d1f4d6a68377c9c4a87f835ab8', $queryMap['signature']);
    }

    /**
     * Test case for getLockedProductPosition.
     *
     * Get Locked Product Position.
     */
    public function testGetLockedProductPosition()
    {
        $asset = '';
        $positionId = '1';
        $projectId = '1';
        $current = 1;
        $size = 10;
        $recvWindow = 5000;
        $response = $this->getApiMock($request)->getLockedProductPosition($asset, $positionId, $projectId, $current, $size, $recvWindow);

        parse_str($request->getUri(), $queryMap);

        self::assertEquals(200, $response->getStatusCode());
        self::assertEquals('/sapi/v1/simple-earn/locked/position', $request->getUri()->getPath());
        self::assertEquals('ccc89a5e48b80d17733b5836204753d96df9add461137f83d5c711197a36d9b1', $queryMap['signature']);
    }

    /**
     * Test case for getLockedRedemptionRecord.
     *
     * Get Locked Redemption Record(USER_DATA).
     */
    public function testGetLockedRedemptionRecord()
    {
        $positionId = '1';
        $redeemId = '1';
        $asset = '';
        $startTime = 1623319461670;
        $endTime = 1641782889000;
        $current = 1;
        $size = 10;
        $recvWindow = 5000;
        $response = $this->getApiMock($request)->getLockedRedemptionRecord($positionId, $redeemId, $asset, $startTime, $endTime, $current, $size, $recvWindow);

        parse_str($request->getUri(), $queryMap);

        self::assertEquals(200, $response->getStatusCode());
        self::assertEquals('/sapi/v1/simple-earn/locked/history/redemptionRecord', $request->getUri()->getPath());
        self::assertEquals('8698c6aa7cbf81e6467758b6d887d6884b4a39502ef6a6bbd1a675de85cc86aa', $queryMap['signature']);
    }

    /**
     * Test case for getLockedRewardsHistory.
     *
     * Get Locked Rewards History(USER_DATA).
     */
    public function testGetLockedRewardsHistory()
    {
        $positionId = '1';
        $asset = '';
        $startTime = 1623319461670;
        $endTime = 1641782889000;
        $current = 1;
        $size = 10;
        $recvWindow = 5000;
        $response = $this->getApiMock($request)->getLockedRewardsHistory($positionId, $asset, $startTime, $endTime, $current, $size, $recvWindow);

        parse_str($request->getUri(), $queryMap);

        self::assertEquals(200, $response->getStatusCode());
        self::assertEquals('/sapi/v1/simple-earn/locked/history/rewardsRecord', $request->getUri()->getPath());
        self::assertEquals('43f239a70e3fb817a2244ce73382c55891024b4882bc81598cea0c1cda4e172a', $queryMap['signature']);
    }

    /**
     * Test case for getLockedSubscriptionPreview.
     *
     * Get Locked Subscription Preview(USER_DATA).
     */
    public function testGetLockedSubscriptionPreview()
    {
        $projectId = '1';
        $amount = 1.0;
        $autoSubscribe = false;
        $recvWindow = 5000;
        $response = $this->getApiMock($request)->getLockedSubscriptionPreview($projectId, $amount, $autoSubscribe, $recvWindow);

        parse_str($request->getUri(), $queryMap);

        self::assertEquals(200, $response->getStatusCode());
        self::assertEquals('/sapi/v1/simple-earn/locked/subscriptionPreview', $request->getUri()->getPath());
        self::assertEquals('ed6d60bbbd167523b7f2ff4be5baa4485dbf0f39322a1cb34907612d59aac34a', $queryMap['signature']);
    }

    /**
     * Test case for getLockedSubscriptionRecord.
     *
     * Get Locked Subscription Record(USER_DATA).
     */
    public function testGetLockedSubscriptionRecord()
    {
        $purchaseId = '1';
        $asset = '';
        $startTime = 1623319461670;
        $endTime = 1641782889000;
        $current = 1;
        $size = 10;
        $recvWindow = 5000;
        $response = $this->getApiMock($request)->getLockedSubscriptionRecord($purchaseId, $asset, $startTime, $endTime, $current, $size, $recvWindow);

        parse_str($request->getUri(), $queryMap);

        self::assertEquals(200, $response->getStatusCode());
        self::assertEquals('/sapi/v1/simple-earn/locked/history/subscriptionRecord', $request->getUri()->getPath());
        self::assertEquals('a7838aa6395886270d69d3856a2affa1d7d46719db7fc7c70a490e642a3c0fea', $queryMap['signature']);
    }

    /**
     * Test case for getRateHistory.
     *
     * Get Rate History(USER_DATA).
     */
    public function testGetRateHistory()
    {
        $productId = '1';
        $aprPeriod = 'DAY';
        $startTime = 1623319461670;
        $endTime = 1641782889000;
        $current = 1;
        $size = 10;
        $recvWindow = 5000;
        $response = $this->getApiMock($request)->getRateHistory($productId, $aprPeriod, $startTime, $endTime, $current, $size, $recvWindow);

        parse_str($request->getUri(), $queryMap);

        self::assertEquals(200, $response->getStatusCode());
        self::assertEquals('/sapi/v1/simple-earn/flexible/history/rateHistory', $request->getUri()->getPath());
        self::assertEquals('0af754bef31bbc2eacb35fc0379a27fbebb9e93765a6b817a1c1a593149b478f', $queryMap['signature']);
    }

    /**
     * Test case for getSimpleEarnFlexibleProductList.
     *
     * Get Simple Earn Flexible Product List(USER_DATA).
     */
    public function testGetSimpleEarnFlexibleProductList()
    {
        $asset = '';
        $current = 1;
        $size = 10;
        $recvWindow = 5000;
        $response = $this->getApiMock($request)->getSimpleEarnFlexibleProductList($asset, $current, $size, $recvWindow);

        parse_str($request->getUri(), $queryMap);

        self::assertEquals(200, $response->getStatusCode());
        self::assertEquals('/sapi/v1/simple-earn/flexible/list', $request->getUri()->getPath());
        self::assertEquals('bd638fc75eac7f4be7a462c128024f88315ab0149337f26f109b46f1202febbf', $queryMap['signature']);
    }

    /**
     * Test case for getSimpleEarnLockedProductList.
     *
     * Get Simple Earn Locked Product List(USER_DATA).
     */
    public function testGetSimpleEarnLockedProductList()
    {
        $asset = '';
        $current = 1;
        $size = 10;
        $recvWindow = 5000;
        $response = $this->getApiMock($request)->getSimpleEarnLockedProductList($asset, $current, $size, $recvWindow);

        parse_str($request->getUri(), $queryMap);

        self::assertEquals(200, $response->getStatusCode());
        self::assertEquals('/sapi/v1/simple-earn/locked/list', $request->getUri()->getPath());
        self::assertEquals('bd638fc75eac7f4be7a462c128024f88315ab0149337f26f109b46f1202febbf', $queryMap['signature']);
    }

    /**
     * Test case for redeemFlexibleProduct.
     *
     * Redeem Flexible Product(TRADE).
     */
    public function testRedeemFlexibleProduct()
    {
        $redeemFlexibleProductRequest = new RedeemFlexibleProductRequest();
        $redeemFlexibleProductRequest->setProductId('1');

        $response = $this->getApiMock($request)->redeemFlexibleProduct($redeemFlexibleProductRequest);

        parse_str($request->getUri(), $queryMap);

        self::assertEquals(200, $response->getStatusCode());
        self::assertEquals('/sapi/v1/simple-earn/flexible/redeem', $request->getUri()->getPath());
        self::assertEquals('c4c7af86a6a8cfafc9909bb0dec0f67695e17aba2a88ca75e983de6e0b915279', $queryMap['signature']);
    }

    /**
     * Test case for redeemLockedProduct.
     *
     * Redeem Locked Product(TRADE).
     */
    public function testRedeemLockedProduct()
    {
        $redeemLockedProductRequest = new RedeemLockedProductRequest();
        $redeemLockedProductRequest->setPositionId('1');

        $response = $this->getApiMock($request)->redeemLockedProduct($redeemLockedProductRequest);

        parse_str($request->getUri(), $queryMap);

        self::assertEquals(200, $response->getStatusCode());
        self::assertEquals('/sapi/v1/simple-earn/locked/redeem', $request->getUri()->getPath());
        self::assertEquals('05345189012e725ecf394a569c76b468c3a9d6377f5b644a1b90e1551920ce91', $queryMap['signature']);
    }

    /**
     * Test case for setFlexibleAutoSubscribe.
     *
     * Set Flexible Auto Subscribe(USER_DATA).
     */
    public function testSetFlexibleAutoSubscribe()
    {
        $setFlexibleAutoSubscribeRequest = new SetFlexibleAutoSubscribeRequest();
        $setFlexibleAutoSubscribeRequest->setProductId('1');
        $setFlexibleAutoSubscribeRequest->setAutoSubscribe(false);

        $response = $this->getApiMock($request)->setFlexibleAutoSubscribe($setFlexibleAutoSubscribeRequest);

        parse_str($request->getUri(), $queryMap);

        self::assertEquals(200, $response->getStatusCode());
        self::assertEquals('/sapi/v1/simple-earn/flexible/setAutoSubscribe', $request->getUri()->getPath());
        self::assertEquals('c4c7af86a6a8cfafc9909bb0dec0f67695e17aba2a88ca75e983de6e0b915279', $queryMap['signature']);
    }

    /**
     * Test case for setLockedAutoSubscribe.
     *
     * Set Locked Auto Subscribe(USER_DATA).
     */
    public function testSetLockedAutoSubscribe()
    {
        $setLockedAutoSubscribeRequest = new SetLockedAutoSubscribeRequest();
        $setLockedAutoSubscribeRequest->setPositionId('1');
        $setLockedAutoSubscribeRequest->setAutoSubscribe(false);

        $response = $this->getApiMock($request)->setLockedAutoSubscribe($setLockedAutoSubscribeRequest);

        parse_str($request->getUri(), $queryMap);

        self::assertEquals(200, $response->getStatusCode());
        self::assertEquals('/sapi/v1/simple-earn/locked/setAutoSubscribe', $request->getUri()->getPath());
        self::assertEquals('05345189012e725ecf394a569c76b468c3a9d6377f5b644a1b90e1551920ce91', $queryMap['signature']);
    }

    /**
     * Test case for setLockedProductRedeemOption.
     *
     * Set Locked Product Redeem Option(USER_DATA).
     */
    public function testSetLockedProductRedeemOption()
    {
        $setLockedProductRedeemOptionRequest = new SetLockedProductRedeemOptionRequest();
        $setLockedProductRedeemOptionRequest->setPositionId('1');
        $setLockedProductRedeemOptionRequest->setRedeemTo('');

        $response = $this->getApiMock($request)->setLockedProductRedeemOption($setLockedProductRedeemOptionRequest);

        parse_str($request->getUri(), $queryMap);

        self::assertEquals(200, $response->getStatusCode());
        self::assertEquals('/sapi/v1/simple-earn/locked/setRedeemOption', $request->getUri()->getPath());
        self::assertEquals('05345189012e725ecf394a569c76b468c3a9d6377f5b644a1b90e1551920ce91', $queryMap['signature']);
    }

    /**
     * Test case for simpleAccount.
     *
     * Simple Account(USER_DATA).
     */
    public function testSimpleAccount()
    {
        $recvWindow = 5000;
        $response = $this->getApiMock($request)->simpleAccount($recvWindow);

        parse_str($request->getUri(), $queryMap);

        self::assertEquals(200, $response->getStatusCode());
        self::assertEquals('/sapi/v1/simple-earn/account', $request->getUri()->getPath());
        self::assertEquals('2cdd1e484bce80021437bee6b762e6a276b1954c3a0c011a16f6f2f6a47aba75', $queryMap['signature']);
    }

    /**
     * Test case for subscribeFlexibleProduct.
     *
     * Subscribe Flexible Product(TRADE).
     */
    public function testSubscribeFlexibleProduct()
    {
        $subscribeFlexibleProductRequest = new SubscribeFlexibleProductRequest();
        $subscribeFlexibleProductRequest->setProductId('1');
        $subscribeFlexibleProductRequest->setAmount(1.0);

        $response = $this->getApiMock($request)->subscribeFlexibleProduct($subscribeFlexibleProductRequest);

        parse_str($request->getUri(), $queryMap);

        self::assertEquals(200, $response->getStatusCode());
        self::assertEquals('/sapi/v1/simple-earn/flexible/subscribe', $request->getUri()->getPath());
        self::assertEquals('3dee22bd6696da63a05dcfeab0e3354c811f0ccee9225496640c2d08bd9e234d', $queryMap['signature']);
    }

    /**
     * Test case for subscribeLockedProduct.
     *
     * Subscribe Locked Product(TRADE).
     */
    public function testSubscribeLockedProduct()
    {
        $subscribeLockedProductRequest = new SubscribeLockedProductRequest();
        $subscribeLockedProductRequest->setProjectId('1');
        $subscribeLockedProductRequest->setAmount(1.0);

        $response = $this->getApiMock($request)->subscribeLockedProduct($subscribeLockedProductRequest);

        parse_str($request->getUri(), $queryMap);

        self::assertEquals(200, $response->getStatusCode());
        self::assertEquals('/sapi/v1/simple-earn/locked/subscribe', $request->getUri()->getPath());
        self::assertEquals('7076688509283b4016a667a9fec02c11e72f52e87779a4cfe5085dad3dbedd37', $queryMap['signature']);
    }
}
